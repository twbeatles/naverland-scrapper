# 🔄 업데이트 히스토리

## v13.0 (2026-01-10) - 📦 Analytics & Stability Edition

**주요 변경사항: 코드 모듈화, 안정성 강화, 분석 기능 향상**

### 🏗️ 아키텍처 개선

#### 1. 전면적인 코드 모듈화
- **패키지 구조**: 기능별 모듈 분리 (crawler, database, ui, utils)
- **메인 엔트리포인트**: `src/main.py`로 통합
- **설정 중앙화**: `src/config.py`에서 모든 상수 관리
- **경로 관리**: `src/utils/paths.py`로 경로 처리 통합

#### 2. 크롤러 모듈 (`src/crawler/`)
- `worker.py`: 크롤링 스레드 (스레드 안전성 강화)
- `driver.py`: WebDriver 생성 및 관리
- `parser.py`: 페이지 파싱 로직
- `cache.py`: TTL 기반 결과 캐싱
- `handler.py`: 재시도 핸들러

#### 3. 데이터베이스 모듈 (`src/database/`)
- `connection.py`: 스레드 안전한 DB 연결 풀
- `manager.py`: 모든 CRUD 작업 통합

#### 4. UI 모듈 (`src/ui/`)
- `window.py`: 메인 윈도우
- `dialogs.py`: 다이얼로그
- `widgets.py`: 위젯 컴포넌트
- `styles.py`: 스타일시트 (테마 지원)
- `animations.py`: 애니메이션 효과

#### 5. 유틸리티 모듈 (`src/utils/`)
- `logger.py`: 파일 + 콘솔 이중 로깅
- `helpers.py`: 헬퍼 함수
- `managers.py`: 설정/프리셋 관리자
- `analytics.py`: 통계 분석 도구
- `converters.py`: 단위 변환
- `paths.py`: 경로 관리

### 🔒 안정성 강화

#### 스레드 안전성
- Lock 기반 동시성 제어
- 안전한 드라이버 정리 및 해제
- 크롤링 스레드 graceful shutdown

#### 리소스 관리
- WebDriver 자동 정리
- DB 연결 풀 안전한 종료
- 메모리 누수 방지

### ⚡ 신규 기능

#### User-Agent 로테이션
- 다양한 브라우저 User-Agent 풀
- 요청마다 랜덤 선택

#### 프록시 지원 준비
- 프록시 리스트 설정
- 프록시 로테이션 인프라

#### 향상된 로깅
- 파일 로깅 (`logs/` 디렉토리)
- 상세한 시작/종료 로그
- 로그 레벨별 분류

### 📝 설정 개선

```python
# 드라이버 설정
DRIVER_CONFIG = {
    "page_load_timeout": 30,
    "implicit_wait": 5,
    "scroll_wait": 0.5,
    "max_scroll_attempts": 10,
}

# 프록시 설정 (선택)
PROXY_LIST = []
PROXY_ROTATION_ENABLED = False
```

---

## v12.0 (2024-12) - 평당가 & 캐싱

### ✨ 신규 기능
- **평당가 계산**: 매물별 평당가 자동 계산 및 정렬
- **크롤링 캐시**: TTL 기반 결과 캐싱 (반복 검색 속도 향상)
- **즐겨찾기/메모**: 관심 매물 저장 및 메모 기능 (DB 준비됨)
- **매물 소멸 추적**: 사라진 매물 감지 (DB 준비됨)

---

## v11.0 (2025-12-21) - 🆕 전면 리팩토링

**주요 변경사항: 코드 품질 대폭 개선, UI/UX 혁신, 안정성 강화**

### ✨ 신규 기능

#### 1. HiDPI 디스플레이 지원
- 고해상도 디스플레이에서 선명한 UI 표시
- Qt ApplicationAttribute 설정으로 자동 스케일링
- 4K, Retina 디스플레이 완벽 지원

#### 2. Toast 알림 시스템  
- **비침습적 알림**: 상태바 대신 우아한 Toast 알림
- **4가지 타입**: Success(✅), Error(❌), Warning(⚠️), Info(ℹ️)
- **자동 사라짐**: 3초 후 자동으로 닫힘
- **스택형 표시**: 여러 알림이 겹치지 않고 순차 표시
- **위치**: 우측 하단에 표시되어 작업 방해 최소화

#### 3. 코드 품질 개선
- **Bare Except 제거**: 모든 예외에 구체적인 타입 지정
  - Before: `except:` → After: `except Exception as e:`
  - 디버깅 시 예외 타입 명확히 로깅
- **타입 힌트 추가**: 주요 메서드에 타입 정보 추가
  ```python
  def show_toast(self, message: str, toast_type: str = "info", duration: int = 3000)
  ```
- **Import 최적화**: QPoint 추가로 Toast 위치 지정 지원

### 🐛 버그 수정 및 최적화

#### 예외 처리 강화
- 크롤러 탭 클릭 실패 시 명확한 로그 메시지
- 스크롤 컨테이너 찾기 실패 시 안전한 fallback
- 통계 데이터 로드 시 예외 추적 강화

#### 메모리 관리
- Toast 위젯 리스트 관리로 메모리 누수 방지
- 닫힌 Toast 자동 제거

#### 스레드 안전성
- DB 연결 풀 안전한 종료 로직
- 크롤러 스레드 종료 시 5초 대기 후 강제 종료

### 📝 코드 개선 사항

#### 가독성 향상
- 여러 줄로 나눈 try-except 블록 (한 줄 코드 제거)
- 명확한 주석 추가
- 버전 정보 문서화 개선

#### 유지보수성
- 타입 힌트로 함수 시그니처 명확화
- Toast 시스템 모듈화로 재사용성 향상

### 🎨 UI/UX 개선

#### 통계 기능 최적화
- 디버깅 로그 강화로 문제 추적 용이
- 에러 발생 시 상세한 traceback 출력
- 사용자 피드백 개선

#### 앱 타이틀 업데이트
- "Refactored Edition" 표시로 리팩토링 버전 명시

---

## v10.5 (2025-12)

### ✨ 신규 기능

* **현대적인 UI 테마**: Glassmorphism 효과, 그라데이션 버튼
* **다크/라이트 모드 개선**: 더 나은 색상 대비
* **자동 로그 정리**: 30일 이상 지난 로그 파일 자동 삭제

### 🐛 버그 수정

* 매물 URL 열기 오류 수정
* Bare except 문 일부 제거

### ⚡ 성능 최적화

* 스레드 안전성 강화
* 리소스 정리 개선

---

## v10.0 (2025-12)

### ✨ 신규 기능

* **가격 변동 그래프**: 이전 수집 기록과 비교하여 가격 추이 그래프 표시
* **각종 버그 수정**: 세세한 사용성 버그 수정

---

## v7.3 (2025)

**기능 확장 버전**

### ✨ 신규 기능

* **가격 변동 알림**: 이전 대비 변동 시 하이라이트
* **신규 매물 표시**: NEW 배지
* **고급 필터**: 가격/면적/층수 범위, 키워드 필터
* **엑셀 템플릿**: 컬럼 선택/순서 커스터마이징
* **URL 일괄 등록**: URL 파싱으로 다중 단지 등록
* **특징 파싱 개선**: 광고 필터링, 핵심 특징 추출

---

## v7.2 (2025)

**안정성 및 유지보수**

### 🛠 개선사항

* DB 경로 안정성 확보
* DB 복원 기능 강화
* 디버깅 로그 강화

---

## v7.1 (2025)

**UI/UX 개선 및 기본 기능 강화**

### 🎨 UI/UX 업데이트

* 결과 요약 카드 UI
* 예상 소요 시간(ETA) 표시
* 클릭 가능한 링크 버튼
* 툴팁 도움말

### ⚙️ 기능 개선

* 단위 라벨 명시 (만원/억, 평/㎡)
* 최근 검색 기록
* 정렬 옵션
* 완료 알림음

---

## 버전별 주요 변화 요약

| 버전 | 주요 변경사항 | 날짜 |
|------|--------------|------|
| **v13.0** | 코드 모듈화, 안정성 강화, Analytics | 2026-01-10 |
| v12.0 | 평당가 계산, 캐싱 시스템 | 2024-12 |
| v11.0 | 전면 리팩토링, HiDPI, Toast 알림 | 2025-12-21 |
| v10.5 | UI 테마 개선, 자동 로그 정리 | 2025-12 |
| v10.0 | 가격 변동 그래프 | 2025-12 |
| v7.3 | 고급 필터, URL 일괄 등록 | 2025 |
| v7.2 | DB 안정성 | 2025 |
| v7.1 | UI/UX 개선 | 2025 |

---

## 다음 버전 계획 (v14.0 예상)

### 고려 중인 기능

- [ ] 매물 비교 기능
- [ ] PDF 내보내기
- [ ] 알림 설정 UI 개선
- [ ] 성능 모니터링 대시보드
- [ ] 자동 테스트 추가
- [ ] 프록시 로테이션 완전 지원
- [ ] 데이터 시각화 차트 개선

---

## 기술 스택

- **UI Framework**: PyQt6
- **Web Scraping**: undetected-chromedriver, BeautifulSoup4
- **Database**: SQLite3
- **Visualization**: Matplotlib
- **Export**: OpenPyXL (Excel), CSV, JSON
- **Notifications**: Plyer, Toast (custom)
- **Build**: PyInstaller

---

## 개발 참고사항

### v13.0 모듈화 포인트

1. **패키지 구조**: crawler, database, ui, utils 모듈 분리
2. **스레드 안전성**: Lock 기반 동시성 제어
3. **리소스 관리**: 안전한 정리 및 해제
4. **로깅 시스템**: 파일 + 콘솔 이중 로깅
5. **설정 관리**: 중앙 집중식 config.py

### 개발 도구

- **AI 도우미**: Claude Opus 4.5, Gemini 3.0 Pro
- **버전 관리**: Git
- **빌드 도구**: PyInstaller
- **테스트**: 수동 테스트 (자동화 예정)

---

**마지막 업데이트**: 2026-01-10  
**현재 버전**: v13.0 (Analytics & Stability Edition)
